const e=globalThis.AudioBuffer||class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=0|e.length,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let e=0;e<this.numberOfChannels;e++)this._channelData.push(this._data.subarray(e*this.length,(e+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||null==e)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,t,n){null==n&&(n=0);for(var a=this._channelData[t],r=n,i=0;r<this.length&&i<e.length;r++,i++)e[i]=a[r]}copyToChannel(e,t,n){var a=this._channelData[t];n||(n=0);for(var r=n,i=0;r<this.length&&i<e.length;r++,i++)a[r]=e[i]}},t={async oga(e){let{decoder:a}=t.oga;if(a)await a.reset();else{let{OggVorbisDecoder:e}=await import("./index-a875d74a.js");await(t.oga.decoder=a=new e).ready}return e&&n(await a.decodeFile(e))},async mp3(e){let{decoder:a}=t.mp3;if(a)await a.reset();else{const{MPEGDecoder:e}=await import("./index-1c9b5d92.js");await(t.mp3.decoder=a=new e).ready}return e&&n(await a.decode(e))},async flac(e){let{decoder:a}=t.flac;if(a)await a.reset();else{const{FLACDecoder:e}=await import("./index-286dd7f3.js");await(t.flac.decoder=a=new e).ready}return e&&n(await a.decode(e))},async opus(e){let{decoder:a}=t.opus;if(a)await a.reset();else{const{OggOpusDecoder:e}=await import("./index-7d6171c7.js");await(t.opus.decoder=a=new e).ready}return e&&n(await a.decodeFile(e))},async wav(e){let{decode:a}=t.wav;if(!a){let e=await import("./index-e32e9397.js").then(function(e){return e.i});a=t.wav.decode=e.default.decode}return e&&n(await a(e))},async qoa(e){let{decode:a}=t.qoa;return a||(t.qoa.decode=a=(await import("./index-99d7c744.js")).decode),e&&n(await a(e))}};function n({channelData:t,sampleRate:n}){let a=new e({sampleRate:n,length:t[0].length,numberOfChannels:t.length});for(let e=0;e<t.length;e++)a.getChannelData(e).set(t[e]);return a}function a(e){return async function(e){if(!e&&!e.length&&!e.buffer)throw Error("Bad decode target");let n=function(e){if(e)return function(e){if(e&&!(e.length<12))return 82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]}(e=new Uint8Array(e.buffer||e))?"wav":function(e){if(e&&!(e.length<3))return 73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&!(224&~e[1])||84===e[0]&&65===e[1]&&71===e[2]}(e)?"mp3":function(e){if(e&&!(e.length<4))return 102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]}(e)?"flac":function(e){if(e&&!(e.length<8))return 102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]}(e)?"m4a":function(e){if(e&&!(e.length<36))return 79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]&&79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]}(e)?"opus":function(e){if(e&&!(e.length<4))return 79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]}(e)?"oga":function(e){if(e)return 113===e[0]&&111===e[1]&&97===e[2]&&102===e[3]}(e)?"qoa":void 0}(e=new Uint8Array(e.buffer||e));if(!n)throw Error("Cannot detect audio format");if(!t[n])throw Error("Missing decoder for "+n+" format");return t[n](e)}(e)}export{a as decodeAudioFile};
//# sourceMappingURL=deps.modern.js.map
