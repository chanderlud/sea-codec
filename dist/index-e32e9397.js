function t(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in t)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),t}const e={pcm8:(t,e,r,n,l)=>{let o=new Uint8Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=o[a++]-128;r[e][t]=n<0?n/128:n/127}},pcm16:(t,e,r,n,l)=>{let o=new Int16Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=o[a++];r[e][t]=n<0?n/32768:n/32767}},pcm24:(t,e,r,n,l)=>{let o=new Uint8Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=o[a++]+(o[a++]<<8)+(o[a++]<<16),l=n>8388608?n-16777216:n;r[e][t]=l<0?l/8388608:l/8388607}},pcm32:(t,e,r,n,l)=>{let o=new Int32Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=o[a++];r[e][t]=n<0?n/2147483648:n/2147483647}},pcm32f:(t,e,r,n,l)=>{let o=new Float32Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e)r[e][t]=o[a++]},pcm64f:(t,e,r,n,l)=>{let o=new Float64Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e)r[e][t]=o[a++]}},r={pcm8:(t,e,r,n,l)=>{let o=new Uint8Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));n=255*(.5*n+.5)|0,o[a++]=n}},pcm16:(t,e,r,n,l)=>{let o=new Int16Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));n=0|(n<0?32768*n:32767*n),o[a++]=n}},pcm24:(t,e,r,n,l)=>{let o=new Uint8Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));n=0|(n<0?16777216+8388608*n:8388607*n),o[a++]=255&n,o[a++]=n>>8&255,o[a++]=n>>16&255}},pcm32:(t,e,r,n,l)=>{let o=new Int32Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));n=0|(n<0?2147483648*n:2147483647*n),o[a++]=n}},pcm32f:(t,e,r,n,l)=>{let o=new Float32Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));o[a++]=n}},pcm64f:(t,e,r,n,l)=>{let o=new Float64Array(t,e),a=0;for(let t=0;t<l;++t)for(let e=0;e<n;++e){let n=Math.max(-1,Math.min(r[e][t],1));o[a++]=n}}};function n(t,e,r){let n="pcm"+e+(r?"f":""),l=t[n];if(!l)throw new TypeError("Unsupported data format: "+n);return l}var l={decode:function(t){let r=0,l=0;t.buffer?(r=t.byteOffset,l=t.length,t=t.buffer):(r=0,l=t.byteLength);let o,a=new DataView(t);function f(){let t=a.getUint8(r);return r++,t}function i(){let t=a.getUint16(r,!0);return r+=2,t}function c(){let t=a.getUint32(r,!0);return r+=4,t}function m(t){let e="";for(let r=0;r<t;++r)e+=String.fromCharCode(f());return e}if("RIFF"!==m(4))throw new TypeError("Invalid WAV file");if(c(),"WAVE"!==m(4))throw new TypeError("Invalid WAV file");for(;r<l;){let l=m(4),a=c(),f=r+a;switch(l){case"fmt ":let l=i();if(1!==l&&3!==l)throw new TypeError("Unsupported format in WAV file: "+l.toString(16));o={format:"lpcm",floatingPoint:3===l,channels:i(),sampleRate:c(),byteRate:c(),blockSize:i(),bitDepth:i()};break;case"data":if(!o)throw new TypeError('Missing "fmt " chunk.');let f=Math.floor(a/o.blockSize),m=o.channels,h=o.sampleRate,p=[];for(let t=0;t<m;++t)p[t]=new Float32Array(f);return n(e,o.bitDepth,o.floatingPoint)(t,r,p,m,f),{sampleRate:h,channelData:p}}r=f}},encode:function(t,e){let l=e.sampleRate||16e3,o=!(!e.float&&!e.floatingPoint),a=o?32:0|e.bitDepth||16,f=t.length,i=t[0].length,c=new ArrayBuffer(44+i*f*(a>>3)),m=new DataView(c),h=0;function p(t){m.setUint16(h,t,!0),h+=2}function u(t){m.setUint32(h,t,!0),h+=4}function w(t){for(var e=0;e<t.length;++e)r=t.charCodeAt(e),m.setUint8(h++,r);var r}return w("RIFF"),u(c.byteLength-8),w("WAVE"),w("fmt "),u(16),p(o?3:1),p(f),u(l),u(l*f*(a>>3)),p(f*(a>>3)),p(a),w("data"),u(c.byteLength-44),n(r,a,o)(c,h,t,f,i),Buffer(c)}},o=/*#__PURE__*/t({__proto__:null,default:l},[l]);export{o as i};
//# sourceMappingURL=index-e32e9397.js.map
